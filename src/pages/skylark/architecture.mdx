import { get, ref, set } from 'firebase/database'
import { useState, useEffect } from "react"
import { database } from '../../../firebase'

async function getImageUrl() {
  const [imageUrl, setImageUrl] = useState<string | null>(null);

  useEffect(() => {
    const fetchImageUrl = async () => {
      try {
        const itemsRef = ref(database, 'items');
        const snapshot = await get(itemsRef);

        if (snapshot.exists()) {
          const childSnapshot = snapshot.val();
          const firstChildKey = Object.keys(childSnapshot)[0];
          const data = childSnapshot[firstChildKey]?.imageUrl;

          if (data) {
            setImageUrl(data);

            // Store the image URL in the multidimensional database
            const imagesRef = ref(database, 'images');
            const newChildRef = imagesRef.push();
            await set(newChildRef, {
              imageUrl: data,
            });
          } else {
            console.log("No image data available");
          }
        } else {
          console.log("No data");
        }
      } catch (error) {
        console.log(error);
      }
    };

    fetchImageUrl();
  }, []);

  return imageUrl || ''; // Returns the image URL or an empty string if not available
}

const imageUrl = await getImageUrl();

![NBA Logo]({ imageUrl })